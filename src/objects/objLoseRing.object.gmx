<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>sprRing</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>0</depth>
  <persistent>0</persistent>
  <parentName>&lt;undefined&gt;</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>
    // ----- Variables ----------------------------------------
    
    motion  =   false;          // Is the ring in movement?
    speedX  =   0;              // X and Y speeds of the ring
    speedY  =   0;              
    
    gravityForce = 0.2;         // How does the gravity affect to this? &gt;_&lt;
    
    timer   =   0;              // For making the rings disappear
    flash   =   true;           // For the flashing effect
    
    image_speed = 0.16;          // Image speed, for animation :)
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>
    /* The ring motion itself is fairly easy and shouldn't be any kind of
       problem. Move the ring, then if it was stuck, bounce and go to the
       previous x. The same for the Y movement.
       
       Also, there's a timer wich when it goes to 0, destroys the ring.
       (only if it's in motion)
    */
    
    // ---- Move if it is in motion --------------------
    if ( motion == true )
    {
        // Apply X motion
        x += speedX;
        
        // Unstuck and bounce if it collides with the walls
        mask_index = maskRingLR;
        if ( (speedX &gt; 0 &amp;&amp; place_meeting( x + 6, y, objWall )) ||
             (speedX &lt; 0 &amp;&amp; place_meeting( x - 6, y, objWall )) )
        {
            // Unstick from the wall
            x -= speedX;            
            // Bounce, losening strenght
            speedX = -speedX * 0.9;
        }
        
       // Apply Y motion
        y += speedY;
        
        // Unstuck and bounce if it collides with the walls
        mask_index = maskRingUD;
        if ( (speedY &gt; 0 &amp;&amp; place_meeting( x, y + 6, objWall )) ||
             (speedY &lt; 0 &amp;&amp; place_meeting( x, y - 6, objWall )) )
        {
            // Unstick from the wall
            y -= speedY*2;            
            // Bounce, losening strenght
            speedY = -speedY * 0.9;
        }
                
        // Apply gravity force
        speedY += gravityForce;
        
        if ( timer &gt; 0  ) timer -= 1;
        if ( timer == 0 ) instance_destroy ();
    }
    
    //Make collison detection bigger
    if collision_circle(x,y,25,objSonicModified,0,1) &amp;&amp; objSonicModified.enable=1
    {
                      //&lt;--Play sound here
    global.rings+=1
    instance_destroy()
    audio_play_sound (sndRing, 10, false);
    }
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>
    // Check if the ring is in movement and the timer is less than 100     
    if ( motion == true &amp;&amp; timer &lt; 100 )
    {
        // Here we'll just going to do a little trick. We need to check
        // if the rings needs to be drawn every X time. Since each frame
        // should be blinking us, we divide the timer between 2 to make the
        // timer stay longer in a number (dirty trick #1) and then calculate
        // the modulus (the remainder) for checking if it's pair or not.
        //
        // If it is, just draw the sprite
        if ( (timer div 2) mod 2 ) draw_sprite ( sprRing, floor(image_index), x, y );
    } else {
        // Otherwise, draw normally
        draw_sprite ( sprRing, floor(image_index), x, y );
    }
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
